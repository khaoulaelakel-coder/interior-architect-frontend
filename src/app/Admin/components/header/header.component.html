<!-- header.component.html -->
<div
  class="w-full h-20 md:h-16 sm:h-14 bg-gradient-to-r from-gray-900 to-gray-800 text-white shadow-md flex items-center justify-between px-6 md:px-4 sm:px-3">
  <!-- Left side with title and breadcrumb -->
  <div class="flex flex-col">
    <h1 class="text-2xl md:text-xl sm:text-lg font-bold text-cyan-400">{{ selectedTitle() }}</h1>
    <div class="text-sm md:text-xs sm:text-xs text-gray-400 flex items-center gap-2 md:gap-1">
      <span>Admin</span>
      <i class="fas fa-chevron-right text-xs"></i>
      <span class="hidden sm:inline">{{ selectedTitle() }}</span>
    </div>
  </div>

  <!-- Right side with actions -->
  <div class="flex items-center gap-4 md:gap-3 sm:gap-2">
    <!-- Search -->
    <div class="relative hidden md:block">
      <input type="text" placeholder="Search..." [(ngModel)]="searchTerm"
        class="bg-gray-800 rounded-full px-4 py-2 text-sm w-48 focus:outline-none focus:ring-2 focus:ring-cyan-400 transition-all duration-200">
      <i class="fas fa-search absolute right-3 top-2.5 text-gray-400"></i>
    </div>

    <!-- Notification bell -->
    <div
      class="relative cursor-pointer hover:text-cyan-400 transition-colors duration-200 p-2 rounded-lg hover:bg-gray-700">
      <i class="fas fa-bell text-lg"></i>
      @if (notificationCount() > 0) {
      <div
        class="absolute -top-1 -right-1 w-5 h-5 bg-red-500 rounded-full flex items-center justify-center text-xs font-medium animate-pulse">
        {{ notificationCount() }}
      </div>
      }
    </div>

    <!-- User profile dropdown -->
    <div class="relative" #userDropdown>
      <div
        class="flex items-center gap-3 cursor-pointer hover:bg-gray-700 rounded-lg px-3 py-2 transition-colors duration-200"
        (click)="toggleDropdown()">
        <div
          class="w-10 h-10 bg-gradient-to-br from-cyan-400 to-blue-500 rounded-full overflow-hidden ring-2 ring-gray-600 hover:ring-cyan-400 transition-all duration-200">
          @if (currentUser()?.avatar) {
          <img [src]="currentUser()?.avatar" [alt]="currentUser()?.name || 'User'" class="w-full h-full object-cover"
            (error)="onImageError($event)">
          } @else {
          <div
            class="w-full h-full flex items-center justify-center text-white font-bold text-sm bg-gradient-to-br from-cyan-500 to-blue-600">
            {{ getInitials() }}
          </div>
          }
        </div>
        <div class="hidden md:block text-left">
          <p class="text-sm md:text-xs font-medium text-white">{{ getUserDisplayName() }}</p>
          <p class="text-xs text-gray-400 hidden lg:block">{{ getUserRole() }}</p>
        </div>
        <i class="fas fa-chevron-down text-xs ml-2 transition-transform duration-200"
          [class.rotate-180]="isDropdownOpen()"></i>
      </div>

      <!-- Dropdown menu -->
      @if (isDropdownOpen()) {
      <div
        class="absolute right-0 mt-2 w-56 bg-gray-800 rounded-lg shadow-xl border border-gray-700 z-50 animate-in slide-in-from-top-2 duration-200"
        (clickOutside)="closeDropdown()">
        <div class="py-2">
          <!-- User info (mobile) -->
          <div class="md:hidden px-4 py-3 border-b border-gray-700 bg-gray-750">
            <div class="flex items-center gap-3">
              <div
                class="w-8 h-8 bg-gradient-to-br from-cyan-400 to-blue-500 rounded-full flex items-center justify-center text-white font-bold text-xs">
                {{ getInitials() }}
              </div>
              <div>
                <p class="text-sm font-medium text-white">{{ getUserDisplayName() }}</p>
                <p class="text-xs text-gray-400">{{ currentUser()?.email }}</p>
              </div>
            </div>
          </div>

          <!-- Menu items -->
          <button
            class="w-full flex items-center gap-3 px-4 py-3 text-sm hover:bg-gray-700 transition-colors duration-200 text-left"
            (click)="viewProfile()">
            <i class="fas fa-user text-cyan-400 w-4"></i>
            <span class="text-gray-200">View Profile</span>
          </button>

          <button
            class="w-full flex items-center gap-3 px-4 py-3 text-sm hover:bg-gray-700 transition-colors duration-200 text-left"
            (click)="editProfile()">
            <i class="fas fa-edit text-cyan-400 w-4"></i>
            <span class="text-gray-200">Edit Profile</span>
          </button>

          <button
            class="w-full flex items-center gap-3 px-4 py-3 text-sm hover:bg-gray-700 transition-colors duration-200 text-left"
            (click)="openSettings()">
            <i class="fas fa-cog text-cyan-400 w-4"></i>
            <span class="text-gray-200">Settings</span>
          </button>

          <button
            class="w-full flex items-center gap-3 px-4 py-3 text-sm hover:bg-gray-700 transition-colors duration-200 text-left"
            (click)="changePassword()">
            <i class="fas fa-key text-cyan-400 w-4"></i>
            <span class="text-gray-200">Change Password</span>
          </button>

          <div class="border-t border-gray-700 my-2"></div>

          <button
            class="w-full flex items-center gap-3 px-4 py-3 text-sm hover:bg-red-600 transition-colors duration-200 text-red-400 hover:text-white text-left"
            (click)="logout()">
            <i class="fas fa-sign-out-alt w-4"></i>
            <span>Logout</span>
          </button>
        </div>
      </div>
      }
    </div>
  </div>
</div>