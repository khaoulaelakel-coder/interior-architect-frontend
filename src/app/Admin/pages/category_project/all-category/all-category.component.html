<div class="bg-white rounded-lg w-full max-w-4xl mx-auto p-6">
  <!-- Title -->
  <h2 class="text-center text-lg font-medium text-gray-800 mb-8">
    Liste des Catégories
  </h2>

  <!-- Loading state -->
  @if (categories.length === 0) {
  <div class="text-center py-8">
    <p class="text-gray-500">Aucune catégorie trouvée.</p>
  </div>
  } @else {
  <!-- Table -->
  <div class="overflow-x-auto shadow-sm border border-gray-200 rounded-lg">
    <table class="w-full">
      <thead class="bg-gray-50">
        <tr>
          <th class="text-left py-4 px-6 font-medium text-gray-700 uppercase tracking-wider text-sm">
            ID
          </th>
          <th class="text-left py-4 px-6 font-medium text-gray-700 uppercase tracking-wider text-sm">
            Nom de Catégorie
          </th>
          <th class="text-left py-4 px-6 font-medium text-gray-700 uppercase tracking-wider text-sm">
            Description
          </th>
          <th class="text-left py-4 px-6 font-medium text-gray-700 uppercase tracking-wider text-sm">
            Cover
          </th>
          <th class="text-left py-4 px-6 font-medium text-gray-700 uppercase tracking-wider text-sm">
            Créé le
          </th>
          <th class="text-center py-4 px-6 font-medium text-gray-700 uppercase tracking-wider text-sm">
            Actions
          </th>
        </tr>
      </thead>
      <tbody class="bg-white divide-y divide-gray-200">
        @for (category of categories; track category.id) {

        <tr class="hover:bg-gray-50 transition-colors">
          <td class="py-4 px-6 text-sm text-gray-900">
            {{ category.id }}
          </td>
          <td class="py-4 px-6 text-sm font-medium text-gray-900">
            {{ category.name }}
          </td>
          <td class="py-4 px-6 text-sm text-gray-700">
            {{ category.description || 'Aucune description' }}
          </td>
          <td class="py-4 px-6 text-sm text-gray-700">
            @if (category.cover) {
            <img [src]="getImageUrl(category.cover)" [alt]="category.name" class="w-12 h-12 object-cover rounded-md"
              (error)="onImageError($event)" />
            } @else {
            <span class="text-gray-400 text-xs">Aucune image</span>
            }
          </td>
          <td class="py-4 px-6 text-sm text-gray-700">
            {{ category.createdAt | date:'short' }}
          </td>
          <td class="py-4 px-6 text-center">
            <div class="flex justify-center space-x-2">
              <button class="bg-blue-500 hover:bg-blue-600 text-white text-xs px-3 py-1 rounded transition-colors"
                (click)="editCategory(category.id!)">
                Modifier
              </button>
              <button class="bg-red-500 hover:bg-red-600 text-white text-xs px-3 py-1 rounded transition-colors"
                (click)="deleteCategory(category.id!)">
                Supprimer
              </button>
            </div>
          </td>
        </tr>
        }
      </tbody>
    </table>
  </div>
  }

  <!-- Add Category Button -->
  <div class="mt-6 text-center">
    <button (click)="createCategory()"
      class="bg-teal-600 hover:bg-teal-700 text-white px-6 py-2 rounded-full transition-colors font-medium flex items-center gap-2 mx-auto">
      <i class="fas fa-plus"></i>
      <span>Ajouter une Nouvelle Catégorie</span>
    </button>
  </div>
</div>